<!DOCTYPE html>

<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="assets/img/favicon.png">

    <title>imFlickr - Improved Flickr</title>

    <link href="assets/css/bootstrap.css" rel="stylesheet">
	<link href="assets/css/bootstrap-theme.css" rel="stylesheet"> 

  <link href="/assets/css/style.css" rel="stylesheet">

    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css">
  	<script src="//code.jquery.com/jquery-1.10.2.js"></script>
  	<script src="//code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
    
  </head>



 <body class="custom-body" style="background-image: none;">

    <!-- Fixed navbar -->
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">imFlickr</a>
        </div>
        
      </div>
    </div>

	<div id="header" class="custom-header">

		<div class="container">
			<h1 style = " position: fixed">Images</h1>
			<div id = "all_elements">
				
				<div id="images_display"></div>
				<table id ="myTable" class ="display_pic_table"> </table>

				<form method = 'post'>
					<input type="hidden" id = "all_url" value ={{urls}}/>
					<input type="hidden" id = "submit_button" onclick="load_pics()"/>
				</form>
			</div>
			<center><button id ="load_more_button"  class="load_more_images_button btn btn-primary btn-lg"> Load More Images </button></center>
		</div>
	</div>
	<div id="footer">
		<div class="container">
			<div class="row">
				<div class="col-lg-6 col-lg-offset-3">
						<p class="copyright">Copyright &copy; 2014 -Shrutika Dasgupta</p>
				</div>
			</div>		
		</div>	
	</div>

    <script src="bootstrap/js/jquery-1.10.2.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>

	<div class="pnt-on-image-wrapper" style="display: none;">
		<div class="pnt-on-image">
			<div class="pnticn pnticn-logo pnticnlarge">
				
			</div>
			<div class="pnt-onimg-text">Point</div>
		</div>
	</div>
 </body>
<script style="text/javascript">

	window.onload = click_on_hidden_button();
	var all_urls;
	var urls_array;
	var page_number;

	function load_pics()
	{
		all_urls = document.getElementById("all_url").value;
		urls_array = all_urls.split(',');
		page_number = 1;

		append_rows(0, 9, 1);
	}

	function click_on_hidden_button()
	{
		document.getElementById("submit_button").click();
	}

	function append_rows(start, end, page_number)
	{
		
		for (var i = start; i< end; i++) 
		{
			if(i > urls_array.length)
			{
				$("#load_more_button").html("No more Images to load");
				$("#load_more_button").prop("disabled", true);
				console.log("Disable");
				
				break;
			}

		    var row = document.createElement("tr");
		    row.setAttribute("id", "myTr"+i);
			row.setAttribute("style", "border-collapse: none");
		    document.getElementById("myTable").appendChild(row);

		    var col1 = document.createElement("td");
		    col1.setAttribute("id", "myTd"+i);
			col1.setAttribute("style", "border-collapse: none");
		    document.getElementById("myTr"+i).appendChild(col1);

		    var col2 = document.createElement("td");
		    col2.setAttribute("id", "myTd"+i+"a");
			col2.setAttribute("style", "border-collapse: none");
		    document.getElementById("myTr"+i).appendChild(col2);

			var image = document.createElement("img");
			image.setAttribute('src',urls_array[i]+"m.jpg");
			image.setAttribute('max-height','100%');
			image.setAttribute('max-width','100%');
			image.setAttribute('class','image-responsive');
			image.setAttribute("id",urls_array[i]+"b.jpg");
			image.setAttribute("onclick","click_image(this.id)");
			document.getElementById("myTd"+i).appendChild(image);
			console.log(i);

			if(i+1 < urls_array.length)
			{
				var image1 = document.createElement("img");
				image1.setAttribute('src',urls_array[i+1]+"m.jpg");
				image1.setAttribute('max-height','200%');
				image1.setAttribute('max-width','200%');
				image1.setAttribute('class','image-responsive');
				image1.setAttribute("id",urls_array[i+1]+"b.jpg");
				image1.setAttribute("onclick","click_image(this.id)");
				document.getElementById("myTd"+i+"a").appendChild(image1);
				i++;
				console.log(i);
				console.log(urls_array.length);
			}
		}
	}

	function click_image(image_id)
	{
		window.location.href = image_id;
	}

	
	$("#load_more_button").click(function(){
		
		var new_start = page_number*10
		var new_end = new_start + 10;
		var total_pages = Math.round(urls_array.length /10);
		var last_page_pics = urls_array.length - 10*(total_pages-1);

		if(page_number == (total_pages-1))
		{
			new_end = urls_array.length;
		}

		page_number = page_number + 1;
		append_rows(new_start, new_end, page_number);
	});
	
</script>



</html>



